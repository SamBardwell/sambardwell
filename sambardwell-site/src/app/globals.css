@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Base colors & fonts */
@layer base {
  :root {
    --background: #ffffff;
    --foreground: #171717;
    --resume-main-max: 700px;
    --resume-side-width: 320px;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --background: #0a0a0a;
      --foreground: #ededed;
    }
  }

  body {
    background: var(--background);
    color: var(--foreground);
    font-family: var(--font-geist-sans), system-ui, sans-serif;
  }
}

/* Tailwind v4 design tokens (expose CSS vars) */
@layer theme {
  @theme inline {
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --font-sans: var(--font-geist-sans);
    --font-mono: var(--font-geist-mono);
  }
}

/* Typography adjustments (applies to elements inside .prose) */
@layer utilities {
  .resume-side-block {
    position: relative;
    padding-left: 1.25rem;          /* space for rail */
    margin-bottom: 3rem;
  }
  .resume-side-block:last-child { margin-bottom: 0; }

  .side-rail-wrap {
    position: relative;
    padding-left: 1.15rem; /* space for segment rail */
  }
  .side-rail {
    position: absolute;
    left: 0;
    top: 0.25rem;          /* start just below the heading (or wrapper top) */
    bottom: 0.25rem;
    width: 2px;
    border-radius: 2px;
    background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
    box-shadow: 0 0 0 1px rgba(255,255,255,0.04) inset;
    pointer-events: none;
  }

  .resume-grid {
    display: grid;
    /* Left column capped by --resume-main-max, right column by new var */
    grid-template-columns:
      minmax(0, clamp(600px, 58vw, var(--resume-main-max)))
      minmax(0, var(--resume-side-width));
    gap: 2rem; /* reduce/increase spacing between columns */
    align-items: start;
  }

  .resume-main {
    /* left column content */
    padding-right: 2rem; /* decrease/increase to tune how far from the divider the bullets stop */
  }

  .resume-side {
    margin-left: 0;
  }

  .resume-item {
    display: grid;
    grid-template-columns: 1fr 140px;
    gap: 1rem;
    padding: 1.25rem 0;
    align-items: start;
  }

  .resume-year {
    align-self: start;
    color: rgba(255,255,255,0.35);
    font-weight: 600;
    font-size: 0.95rem;
    text-align: right;
    padding-left: 1rem;
    padding-right: 0;
  }

  .resume-content {
    position: relative;
  }

  .resume-rail {
    position: absolute;
    left: 0;
    top: 0.6rem;      /* start just below the title baseline */
    bottom: 0.6rem;   /* end slightly above bottom for breathing room */
    width: 2px;
    border-radius: 2px;
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    box-shadow: 0 0 0 1px rgba(255,255,255,0.01) inset;
    pointer-events: none;
  }

  .resume-side-rail {
    position: absolute;
    left: 0;
    top: 0.35rem;                   /* start just under heading top */
    bottom: 0.35rem;
    width: 2px;
    border-radius: 2px;
    background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
    box-shadow: 0 0 0 1px rgba(255,255,255,0.04) inset;
    pointer-events: none;
  }
  
  .resume-content-inner {
    margin-left: 1rem; /* <-- controls where title/company start. increase to move everything right */
  }

  /* lists: explicit bullets, UL controls indent so bullets always appear */
  .resume-points {
    list-style-type: disc;
    list-style-position: outside;
    padding-left: 1rem; /* space from left rail + bullet area */
    margin: 0;
  }
  .resume-points li {
    margin: 0;
    padding-left: 0; /* keep text aligned under itself */
  }
  /* color the marker (modern browsers) */
  .resume-points li::marker {
    color: #10b981; /* emerald-500 */
    font-size: 0.95em;
  }

   .education-entry {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 1.5rem;
    align-items: baseline;
    position: relative;
  }
  .education-year {
    color: rgba(255,255,255,0.35);
    font-weight: 600;
    font-size: 0.95rem;
    padding-top: 0;  /* align with school name baseline */
    white-space: nowrap;
  }

  /* small screens: reduce left padding so layout fits */
  @media (max-width: 900px) {
    .resume-points {
      list-style-position: outside;
      padding-left: 1rem;
    }
    .resume-points li { padding-left: 0; }
    .resume-side-block {
      padding-left: 0.75rem;
      margin-bottom: 2rem;
    }
    .side-rail-wrap { padding-left: 0.75rem; }
    .education-entry {
      grid-template-columns: 1fr;
    }
    .education-year {
      padding-top: 0.25rem;
      order: -1; /* put year above if preferred; remove to put below */
    }
  }

  /* Sidebar inner */
  .resume-side-inner {
    background: transparent;
    padding-left: 0.25rem;
    margin-top: 4rem; /* <-- bump this value if needed */
  }

  .resume-side-heading {
    @apply text-xl font-semibold;
    margin: 0 0 0.75rem 0;
    line-height: 1.15;
  }

  .resume-side-body {
    @apply text-sm text-zinc-300;
  }

  /* Print / PDF rules */
  @media print {
    body { background: white !important; color: black !important; }
    .resume-grid { grid-template-columns: 1fr 320px; gap: 1rem; }
    .prose { color: inherit; }
    header, footer, .filters-bar { display: none !important; }
    .resume-item { border-color: #ddd; }
    .resume-side-rail {
      background: #000;
      box-shadow: none;
    }
    .side-rail {
      background: #000;
      box-shadow: none;
    }
    .education-year { color: #555; }
  }

  /* Small screens stack */
  @media (max-width: 900px) {
    .resume-content-inner { margin-left: 0; }
    .resume-points { list-style-position: outside; padding-left: 1rem; }
    .resume-points li { padding-left: 0; }
  }
  /* Base article text size & line height */
  .prose {
    @apply text-[15px] leading-relaxed;
  }

  /* Headings */
  .prose :where(h1):not(:where(.not-prose *)) {
    @apply text-4xl font-semibold tracking-tight mt-0 mb-4;
  }
  .prose :where(h2):not(:where(.not-prose *)) {
    @apply text-2xl font-semibold mt-10 mb-3;
  }
  .prose :where(h3):not(:where(.not-prose *)) {
    @apply text-xl font-semibold mt-8 mb-2;
  }

  /* Paragraph & list spacing */
  .prose :where(p):not(:where(.not-prose *)) {
    margin-top: 0.9rem;
    margin-bottom: 0;
  }
  .prose :where(ul,ol):not(:where(.not-prose *)) {
    margin-top: 0.9rem;
    margin-bottom: 0;
  }

  /* Tighten first block after heading */
  .prose :where(
    h1 + p,
    h2 + p,
    h3 + p,
    h2 + ul,
    h3 + ul,
    h2 + ol,
    h3 + ol
  ):not(:where(.not-prose *)) {
    margin-top: 0.5rem;
  }

  /* Code blocks (higher contrast vs page bg) */
  .prose :where(pre):not(:where(.not-prose *)) {
    /* Subtle vertical gradient and visible border */
    background: linear-gradient(180deg, #181818, #121212);
    border: 1px solid rgba(63,63,70,0.6); /* zinc-600ish */
    @apply rounded-lg px-4 py-3 overflow-x-auto;
    margin-top: 0.9rem;
    margin-bottom: 0;
    box-shadow:
      0 0 0 1px rgba(63,63,70,0.4),
      0 4px 12px -4px rgba(0,0,0,0.6);
    position: relative;
  }

  /* Optional accent bar on top of fenced blocks */
  .prose :where(pre)::before {
    content: "";
    display: block;
    @apply h-[3px] w-full rounded-t-md mb-2;
    background: linear-gradient(90deg, #10b981, #2563eb);
  }

  /* Consecutive code blocks closer together */
  .prose :where(pre + pre):not(:where(.not-prose *)) {
    margin-top: 0.5rem;
  }

  /* Inline code (pill) */
  .prose :where(code):not(:where(pre code,.not-prose *)) {
    @apply font-medium text-[13px];
    background: rgba(63,63,70,0.5);
    color: #34d399; /* emerald-400 */
    padding: 0.15rem 0.45rem;
    border-radius: 0.35rem;
    border: 1px solid rgba(82,82,91,0.6);
  }

  /* Code text inside fenced block */
  .prose :where(pre code):not(:where(.not-prose *)) {
    @apply bg-transparent p-0 text-[13px] leading-relaxed;
    color: #e5e5e5;
  }

  /* Links */
  .prose :where(a):not(:where(.not-prose *)) {
    @apply font-medium underline underline-offset-4 transition-colors;
    color: #34d399;
    text-decoration-color: rgba(52,211,153,0.4);
  }
  .prose :where(a:hover):not(:where(.not-prose *)) {
    color: #6ee7b7;
    text-decoration-color: #6ee7b7;
  }

  /* Blockquotes */
  .prose :where(blockquote):not(:where(.not-prose *)) {
    @apply italic rounded-r;
    border-left: 4px solid #3f3f46;
    background: rgba(24,24,27,0.6);
    padding-left: 1rem;
    margin: 1.2rem 0 0;
    color: #a1a1aa;
  }

  /* Lists */
  .prose :where(ul):not(:where(.not-prose *)) {
    @apply list-disc pl-6 space-y-1;
  }
  .prose :where(ol):not(:where(.not-prose *)) {
    @apply list-decimal pl-6 space-y-1;
  }

  /* Horizontal rule */
  .prose :where(hr):not(:where(.not-prose *)) {
    @apply my-10;
    border-color: #27272a;
  }
  
  @keyframes shimmer {
    0% { background-position: 0% 50%; }
    100% { background-position: -200% 50%; }
  }

  /* Final element bottom trim */
  .prose :where(p:last-child, ul:last-child, ol:last-child, pre:last-child, blockquote:last-child):not(:where(.not-prose *)) {
    margin-bottom: 0;
  }
}